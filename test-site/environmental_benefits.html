
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Environmental Benefits</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      max-width: 1000px;
      width: 90%;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 20px;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .icon {
      width: 48px;
      height: 48px;
      margin: 0 auto;
      animation: float 2s infinite ease-in-out;
    }
    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    .label {
      font-size: 1.2rem;
      margin-top: 10px;
      color: #444;
    }
    .value {
      font-size: 1.6rem;
      font-weight: bold;
      color: #2e7d32;
      margin-top: 5px;
    }
    svg {
      fill: #2e7d32;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M264 96C264 43 221 0 168 0S72 43 72 96c0 24.9 9.9 47.6 26 64H56c-13.3 0-24 10.7-24 24s10.7 24 24 24H80c-26.5 0-48 21.5-48 48s21.5 48 48 48H192V432h-40c-13.3 0-24 10.7-24 24s10.7 24 24 24H296c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40V304H368c26.5 0 48-21.5 48-48s-21.5-48-48-48h24c13.3 0 24-10.7 24-24s-10.7-24-24-24H336c16.1-16.4 26-39.1 26-64c0-53-43-96-96-96s-96 43-96 96z"/></svg>
      </div>
      <div class="label">Equivalent Trees Planted</div>
      <div class="value" id="treesPlanted">100</div>
    </div>
    <div class="card">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M544 192h-16L451.22 56.47A64 64 0 0 0 398.8 32H241.2a64 64 0 0 0-52.42 24.47L112 192H96A96 96 0 0 0 0 288v32a32 32 0 0 0 32 32h48a64 64 0 0 0 128 0h224a64 64 0 0 0 128 0h48a32 32 0 0 0 32-32v-32a96 96 0 0 0-96-96ZM170.67 80.63A32 32 0 0 1 195.2 64h157.6a32 32 0 0 1 24.53 11.37L435.2 192H204.8ZM128 384a32 32 0 1 1 32-32 32 32 0 0 1-32 32Zm384 0a32 32 0 1 1 32-32 32 32 0 0 1-32 32Z"/></svg>
      </div>
      <div class="label">Electric cars powered for a year:</div>
      <div class="value" id="carsPowered">N/A cars</div>
    </div>
    <div class="card">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M192 0C86 0 0 86 0 192c0 77.4 47.2 143.4 114.5 172.5L192 512l77.5-147.5C336.8 335.4 384 269.4 384 192 384 86 298 0 192 0z"/></svg>
      </div>
      <div class="label">CO₂ Emissions Avoided</div>
      <div class="value" id="CO2Avoided">9,491 kg</div>
    </div>
    <div class="card">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 256h-80v-96a32 32 0 0 0-32-32H160a32 32 0 0 0-32 32v96H48a16 16 0 0 0-16 16v96a80 80 0 0 0 160 0v-80h128v80a80 80 0 0 0 160 0v-96a16 16 0 0 0-16-16z"/></svg>
      </div>
      <div class="label">Phones Charged</div>
      <div class="value" id="phonesCharged">10000</div>
    </div>
    <div class="card">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M352 256a96 96 0 1 1 0-192 96 96 0 0 1 0 192zM240 320a80 80 0 1 1-160 0 80 80 0 0 1 160 0zm176 0a64 64 0 1 1 0 128 64 64 0 0 1 0-128z"/></svg>
      </div>
      <div class="label">Days of Clean Energy</div>
      <div class="value" id="operatingDays">98</div>
    </div>
    <div class="card">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M96 64A64 64 0 0 0 32 128v128H0v64H32v32a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V128a64 64 0 0 0-64-64zm32 224a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm384 0a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"/></svg>
      </div>
      <div class="label">Gallons of gasoline offset</div>
      <div class="value"  id="gasolineGallons">N/A gallons</div>
    </div>
  </div>
  <script>
    const carsPowered = document.getElementById("carsPowered");
    const treesPlanted = document.getElementById("treesPlanted");
    const gasolineGallons = document.getElementById("gasolineGallons");
    const CO2Avoided = document.getElementById("CO2Avoided");
    const phonesCharged = document.getElementById("phonesCharged");
    const operatingDays = document.getElementById("operatingDays");
    function getCO2(energy){
      const CO2 = energy * 9.9e-6;
      return CO2;
    }
    function getSmartphonesCharged(energy){
      const smartphones = (energy/0.019).toFixed(0);
      return smartphones;
    }
    function getTreeCount(energy){
      const CO2 = getCO2(energy);
      const trees = (CO2/0.06).toFixed(0);
      return trees;
    }
    function getGasolineGallons(energy){
      const CO2 = getCO2(energy);
      const gasolineLiters = CO2/0.002347;
      const gasolineGallons = gasolineLiters/3.785;
      return gasolineGallons.toFixed(2);
    }
    function getYearlyCarsPowered(energy){
      const yearlyCarsPowered = (energy/3078).toFixed(0);
      return yearlyCarsPowered;
    }
    async function getOperationalTime(){
      const response = await fetch("https://clients.hakaienergy.ca/camosun/api-update.php?api=systems_summary");
      const rawData = await response.json();
      const startTime = rawData.operational_at;
      const finalTime = rawData.last_report_at;
      const operationalSeconds = finalTime-startTime;
      const operationalDays = (operationalSeconds/86400).toFixed(0);
      return operationalDays;
    }
    async function getTotalEnergyProduced(){
      const response = await fetch("https://clients.hakaienergy.ca/camosun/api-update.php?api=systems_summary");
      const rawData = await response.json();
      return rawData.energy_lifetime;
    }
    async function setEnvironmentalBenefits(){
      let energy = await getTotalEnergyProduced();
      energy /= 1000;
      const operatingDaysValue = await getOperationalTime();
      const carsPoweredValue = getYearlyCarsPowered(energy);
      const gasolineGallonsValue = getGasolineGallons(energy);
      const CO2AvoidedValue = getCO2(energy).toFixed(2);
      const treesPlantedValue = getTreeCount(energy);
      const phonesChargedValue = getSmartphonesCharged(energy);
      treesPlanted.textContent = `${treesPlantedValue} trees`;
      carsPowered.textContent = `${carsPoweredValue} cars`;
      gasolineGallons.textContent = `${gasolineGallonsValue} gallons`;
      CO2Avoided.textContent = `${CO2AvoidedValue} tCO₂`;
      phonesCharged.textContent = `${phonesChargedValue} phones`;
      operatingDays.textContent = `${operatingDaysValue} days`;
    }
    async function onStart(){
      setEnvironmentalBenefits();
    }
    onStart();
  </script>
</body>
</html>
