
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Environmental Benefits</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      max-width: 1400px;
      width: 90%;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 20px;
    }
    .card {
      background: white;
      border-radius: 12px;
      width: 25vw;
      height: 30vh;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .icon {
      width: 128px;
      height: 128px;
      margin: 0 auto;
      animation: float 2s infinite ease-in-out;
    }
    .icon img{
      width:100%;
      height: auto;
      background-color: transparent;
    }
    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    .label {
      font-size: 1.6rem;
      margin-top: 10px;
      color: #444;
    }
    .value {
      font-size: 2rem;
      font-weight: bold;
      color: #2e7d32;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="icon">
        <img src="images/tree_icon.png" alt="Tree Image">
      </div>
      <div class="label">Equivalent Trees Planted</div>
      <div class="value" id="treesPlanted">N/A Trees</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/car_icon.png" alt="Car Image">
      </div>
      <div class="label">Electric cars powered (1 yr)</div>
      <div class="value" id="carsPowered">N/A cars</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/CO2_icon.png" alt="CO2 Image">
      </div>
      <div class="label">CO₂ Emissions Avoided</div>
      <div class="value" id="CO2Avoided">N/A tCO₂e</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/phone_icon.png" alt="Phone Image">
      </div>
      <div class="label">Phones Charged</div>
      <div class="value" id="phonesCharged">N/A phones</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/sun_icon.png" alt="Sun Image">
      </div>
      <div class="label">Days of Clean Energy</div>
      <div class="value" id="operatingDays">N/A days</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/gas_icon.png" alt="Gas Image">
      </div>
      <div class="label">Gallons of gasoline offset</div>
      <div class="value"  id="gasolineGallons">N/A gallons</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/gas_icon.png" alt="Kilometers Image">
      </div>
      <div class="label">Kilometers driven by gas vehicle</div>
      <div class="value"  id="kmsDriven">N/A Km</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/gas_icon.png" alt="Display Hours Image">
      </div>
      <div class="label">Hours that the energy can run this display</div>
      <div class="value"  id="displayHours">N/A hours</div>
    </div>
    <div class="card">
      <div class="icon">
        <img src="images/gas_icon.png" alt="Litter Removed Image">
      </div>
      <div class="label">Litter removed from the Grand Pacific Ocean</div>
      <div class="value"  id="yearlyTrash">N/A tons</div>
    </div>
  </div>
  <script>
    const carsPowered = document.getElementById("carsPowered");
    const treesPlanted = document.getElementById("treesPlanted");
    const gasolineGallons = document.getElementById("gasolineGallons");
    const CO2Avoided = document.getElementById("CO2Avoided");
    const phonesCharged = document.getElementById("phonesCharged");
    const operatingDays = document.getElementById("operatingDays");
    const kmsDriven = document.getElementById("kmsDriven");
    const displayHours = document.getElementById("displayHours");
    const yearlyTrash = document.getElementById("yearlyTrash");
    function sumArray(accumulator, element){
      return accumulator + element;
    }

    function getCO2(energy){
      const CO2 = energy * 9.9e-6;
      return CO2;
    }
    function getSmartphonesCharged(energy){
      const smartphones = (energy/0.02035).toFixed(0);
      return smartphones;
    }
    function getTreeCount(energy){
      const CO2 = getCO2(energy);
      const trees = CO2/0.06;
      return trees.toFixed(0);
    }
    function getGasolineGallons(energy){
      const CO2 = getCO2(energy);
      const gasolineGallons = CO2/0.0093715;
      return gasolineGallons.toFixed(2);
    }
    function getYearlyCarsPowered(energy){
      const yearlyCarsPowered = energy/3071;
      return yearlyCarsPowered.toFixed(0);
    }
    function getKmsDriven(energy){
      const CO2 = getCO2(energy);
      const kms = CO2 / 2.66e-4;
      return kms.toFixed(2);
    }
    function getDisplayHours(energy){
      const hoursRun = energy/0.215;
      return hoursRun.toFixed(0);
    }
    function getLitterRemoved(yearlyEnergy){
      const yearlyCO2 = getCO2(yearlyEnergy);
      const litterRemoved = yearlyCO2 * 365;
      return litterRemoved.toFixed(2);
    }
    async function getOperationalTime(){
      const response = await fetch("https://clients.hakaienergy.ca/camosun/api-update.php?api=systems_summary");
      const rawData = await response.json();
      const startTime = rawData.operational_at;
      const finalTime = rawData.last_report_at;
      const operationalSeconds = finalTime-startTime;
      const operationalDays = (operationalSeconds/86400).toFixed(0);
      return operationalDays;
    }
    async function getTotalEnergyProduced(){
      const response = await fetch("https://clients.hakaienergy.ca/camosun/api-update.php?api=systems_summary");
      const rawData = await response.json();
      return rawData.energy_lifetime;
    }
    async function getYearlyEnergyProduced(){
      const response = await fetch("https://clients.hakaienergy.ca/camosun/get_site_energy.php?t=DAY&r=-1 year&f=json");
      const rawData = await response.json();
      const values = rawData.map(item => item.value);
      const yearlyEnergy = values.reduce(sumArray);
      return yearlyEnergy;
    }
    async function setEnvironmentalBenefits(){
      let energy = await getTotalEnergyProduced();
      energy /= 1000;
      let yearlyEnergy = await getYearlyEnergyProduced();
      yearlyEnergy /= 1000;
      const operatingDaysValue = await getOperationalTime();
      const carsPoweredValue = getYearlyCarsPowered(energy);
      const gasolineGallonsValue = getGasolineGallons(energy);
      const CO2AvoidedValue = getCO2(energy).toFixed(2);
      const treesPlantedValue = getTreeCount(energy);
      const phonesChargedValue = getSmartphonesCharged(energy);
      const kmsDrivenValue = getKmsDriven(energy);
      const displayHoursValue = getDisplayHours(energy);
      const yearlyTrashValue = getLitterRemoved(yearlyEnergy);
      treesPlanted.textContent = `${treesPlantedValue} trees`;
      carsPowered.textContent = `${carsPoweredValue} cars`;
      gasolineGallons.textContent = `${gasolineGallonsValue} gallons`;
      CO2Avoided.textContent = `${CO2AvoidedValue} tCO₂`;
      phonesCharged.textContent = `${phonesChargedValue} phones`;
      operatingDays.textContent = `${operatingDaysValue} days`;
      kmsDriven.textContent = `${kmsDrivenValue} Km`;
      displayHours.textContent = `${displayHoursValue} hours`;
      yearlyTrash.textContent = `${yearlyTrashValue} tons`;
    }
    async function onStart(){
      setEnvironmentalBenefits();
    }
    onStart();
  </script>
</body>
</html>
